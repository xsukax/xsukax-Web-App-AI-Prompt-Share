<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xsukax Web App AI Prompt Share</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
        }
        .notification {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .modal {
            animation: fadeIn 0.2s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            animation: scaleIn 0.2s ease-out;
        }
        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                <h1 class="text-xl sm:text-2xl font-semibold text-gray-900">xsukax Web App AI Prompt Share</h1>
                <div class="flex flex-wrap gap-2">
                    <button id="importBtn" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Import Config
                    </button>
                    <button id="exportBtn" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Export Config
                    </button>
                    <button id="shareBtn" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                        Generate Shareable URL
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Purpose Input -->
        <section class="mb-8">
            <label for="purpose" class="block text-sm font-semibold text-gray-900 mb-2">Main Purpose of Your Web App</label>
            <textarea 
                id="purpose" 
                rows="3" 
                class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y"
                placeholder="Describe the main purpose of your web application..."
            ></textarea>
        </section>

        <!-- Checklist -->
        <section class="mb-8">
            <h2 class="text-base font-semibold text-gray-900 mb-4">Development Guidelines & Constraints</h2>
            <div class="bg-white border border-gray-200 rounded-md p-4">
                <div id="checklistContainer" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
            </div>
        </section>

        <!-- Generated Prompt -->
        <section class="mb-8">
            <div class="flex justify-between items-center mb-2">
                <label for="generatedPrompt" class="block text-sm font-semibold text-gray-900">Generated Prompt</label>
                <button id="copyBtn" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                    Copy to Clipboard
                </button>
            </div>
            <textarea 
                id="generatedPrompt" 
                rows="10" 
                class="w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y"
                readonly
                placeholder="Your generated prompt will appear here..."
            ></textarea>
        </section>
    </main>

    <!-- Import Modal -->
    <div id="importModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 modal hidden px-4">
        <div class="bg-white rounded-md shadow-xl max-w-lg w-full modal-content">
            <div class="px-4 py-3 border-b border-gray-200">
                <h3 class="text-base font-semibold text-gray-900">Import Configuration</h3>
            </div>
            <div class="px-4 py-4">
                <textarea 
                    id="importJson" 
                    rows="8" 
                    class="w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4 resize-y"
                    placeholder="Paste your JSON configuration here..."
                ></textarea>
                <div class="flex justify-end gap-2">
                    <button id="cancelImport" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button id="uploadJsonFile" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Upload JSON File
                    </button>
                    <button id="confirmImport" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                        Import
                    </button>
                </div>
                <input type="file" id="jsonFileInput" accept=".json" class="hidden">
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 modal hidden px-4">
        <div class="bg-white rounded-md shadow-xl max-w-2xl w-full modal-content">
            <div class="px-4 py-3 border-b border-gray-200">
                <h3 class="text-base font-semibold text-gray-900">Export Configuration</h3>
            </div>
            <div class="px-4 py-4">
                <textarea 
                    id="exportJson" 
                    rows="12" 
                    class="w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4 resize-y"
                    readonly
                ></textarea>
                <div class="flex justify-end gap-2">
                    <button id="downloadJson" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Download JSON
                    </button>
                    <button id="copyJson" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Copy JSON
                    </button>
                    <button id="closeExport" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 modal hidden px-4">
        <div class="bg-white rounded-md shadow-xl max-w-2xl w-full modal-content">
            <div class="px-4 py-3 border-b border-gray-200">
                <h3 class="text-base font-semibold text-gray-900">Generate Shareable URL</h3>
            </div>
            <div class="px-4 py-4">
                <div class="mb-4 space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="encryptionType" value="base64" class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                        <span class="ml-2 text-sm text-gray-700">Base64 Encoded URL</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="encryptionType" value="aes" class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                        <span class="ml-2 text-sm text-gray-700">AES-256 Encrypted URL (with password)</span>
                    </label>
                </div>
                <div id="passwordSection" class="mb-4 hidden">
                    <label for="sharePassword" class="block text-sm font-medium text-gray-900 mb-1">Encryption Password</label>
                    <input 
                        type="password" 
                        id="sharePassword" 
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="Enter password for encryption"
                    >
                </div>
                <div class="mb-4">
                    <label for="shareUrl" class="block text-sm font-medium text-gray-900 mb-1">Shareable URL</label>
                    <input 
                        type="text" 
                        id="shareUrl" 
                        class="w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        readonly
                        placeholder="Click 'Generate URL' to create shareable link"
                    >
                </div>
                <div class="flex justify-end gap-2">
                    <button id="cancelShare" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button id="generateUrl" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                        Generate URL
                    </button>
                    <button id="openUrl" class="px-3 py-1.5 text-sm font-medium text-white bg-purple-600 border border-purple-600 rounded-md hover:bg-purple-700 transition-colors hidden">
                        Open URL
                    </button>
                    <button id="copyUrl" class="px-3 py-1.5 text-sm font-medium text-white bg-green-600 border border-green-600 rounded-md hover:bg-green-700 transition-colors hidden">
                        Copy URL
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Prompt Modal -->
    <div id="passwordModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 modal hidden px-4">
        <div class="bg-white rounded-md shadow-xl max-w-md w-full modal-content">
            <div class="px-4 py-3 border-b border-gray-200">
                <h3 class="text-base font-semibold text-gray-900">Enter Decryption Password</h3>
            </div>
            <div class="px-4 py-4">
                <p class="text-sm text-gray-600 mb-4">This URL contains encrypted configuration. Please enter the password to decrypt:</p>
                <input 
                    type="password" 
                    id="decryptPassword" 
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"
                    placeholder="Enter password"
                >
                <div class="flex justify-end gap-2">
                    <button id="cancelDecrypt" class="px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                    <button id="confirmDecrypt" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                        Decrypt
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="fixed top-4 right-4 z-50 space-y-2 max-w-sm"></div>

    <script>
        // Checklist configuration
        const checklistItems = [
            { id: 1, text: "Use SVG tags for icons and graphics", checked: false },
            { id: 2, text: "Avoid SVG tags entirely", checked: true },
            { id: 3, text: "Ensure responsive design across common devices", checked: true },
            { id: 4, text: "Use Tailwind CSS for styling", checked: true },
            { id: 5, text: "Implement dark mode toggle", checked: false },
            { id: 6, text: "Use localStorage for data persistence", checked: false },
            { id: 7, text: "Implement service worker for caching", checked: false },
            { id: 8, text: "Use modern ES6+ JavaScript features", checked: true },
            { id: 9, text: "Implement accessibility features (ARIA)", checked: false },
            { id: 10, text: "Optimize for performance", checked: true },
            { id: 11, text: "Use semantic HTML elements", checked: true },
            { id: 12, text: "Implement error boundaries", checked: false },
            { id: 13, text: "Use TypeScript instead of JavaScript", checked: false },
            { id: 14, text: "Implement progressive web app features", checked: false },
            { id: 15, text: "Use React hooks for state management", checked: false },
            { id: 16, text: "Implement client-side routing", checked: false },
            { id: 17, text: "Use GraphQL instead of REST API", checked: false },
            { id: 18, text: "Implement real-time updates with WebSockets", checked: false },
            { id: 19, text: "Use CSS Grid for layout", checked: false },
            { id: 20, text: "Use Flexbox for component alignment", checked: false },
            { id: 21, text: "Implement form validation", checked: false },
            { id: 22, text: "Use lazy loading for images", checked: true },
            { id: 23, text: "Implement infinite scrolling", checked: false },
            { id: 24, text: "Use Web Workers for heavy computations", checked: false },
            { id: 25, text: "Implement drag and drop functionality", checked: false },
            { id: 26, text: "Use WebGL for 3D graphics", checked: false },
            { id: 27, text: "Implement keyboard shortcuts", checked: false },
            { id: 28, text: "Use JWT for authentication", checked: false },
            { id: 29, text: "Implement server-side rendering", checked: false },
            { id: 30, text: "Use Docker for containerization", checked: false },
            { id: 31, text: "Replace alert popups with CSS-based modal dialogs", checked: true },
            { id: 32, text: "Write every single css rule in one line", checked: true },
            { id: 33, text: "Add Documentation button to open CSS Modal explaining the app", checked: false },
            { id: 34, text: "Display overlay notifications at the top-right corner", checked: true }
        ];

        // DOM Elements
        const els = {
            purpose: document.getElementById('purpose'),
            checklistContainer: document.getElementById('checklistContainer'),
            generatedPrompt: document.getElementById('generatedPrompt'),
            copyBtn: document.getElementById('copyBtn'),
            importModal: document.getElementById('importModal'),
            exportModal: document.getElementById('exportModal'),
            shareModal: document.getElementById('shareModal'),
            passwordModal: document.getElementById('passwordModal'),
            importBtn: document.getElementById('importBtn'),
            exportBtn: document.getElementById('exportBtn'),
            shareBtn: document.getElementById('shareBtn'),
            cancelImport: document.getElementById('cancelImport'),
            confirmImport: document.getElementById('confirmImport'),
            uploadJsonFile: document.getElementById('uploadJsonFile'),
            jsonFileInput: document.getElementById('jsonFileInput'),
            closeExport: document.getElementById('closeExport'),
            downloadJson: document.getElementById('downloadJson'),
            copyJson: document.getElementById('copyJson'),
            cancelShare: document.getElementById('cancelShare'),
            generateUrl: document.getElementById('generateUrl'),
            openUrl: document.getElementById('openUrl'),
            copyUrl: document.getElementById('copyUrl'),
            importJson: document.getElementById('importJson'),
            exportJson: document.getElementById('exportJson'),
            shareUrl: document.getElementById('shareUrl'),
            passwordSection: document.getElementById('passwordSection'),
            sharePassword: document.getElementById('sharePassword'),
            decryptPassword: document.getElementById('decryptPassword'),
            cancelDecrypt: document.getElementById('cancelDecrypt'),
            confirmDecrypt: document.getElementById('confirmDecrypt'),
            notifications: document.getElementById('notifications')
        };

        let encryptedData = null;

        // Initialize checklist
        const initializeChecklist = () => {
            els.checklistContainer.innerHTML = '';
            checklistItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'flex items-start';
                div.innerHTML = `
                    <input 
                        id="check-${item.id}" 
                        type="checkbox" 
                        class="mt-0.5 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                        ${item.checked ? 'checked' : ''}
                    >
                    <label for="check-${item.id}" class="ml-2 text-sm text-gray-700 cursor-pointer select-none">${item.text}</label>
                `;
                els.checklistContainer.appendChild(div);
                
                div.querySelector('input').addEventListener('change', (e) => {
                    item.checked = e.target.checked;
                    updateGeneratedPrompt();
                });
            });
        };

        // Update generated prompt
        const updateGeneratedPrompt = () => {
            const purpose = els.purpose.value.trim();
            const selected = checklistItems.filter(item => item.checked).map(item => item.text);
            
            let prompt = '';
            if (purpose) {
                prompt += `Main Purpose: ${purpose}\n\n`;
            }
            if (selected.length > 0) {
                prompt += 'Constraints and Guidelines:\n';
                selected.forEach(item => prompt += `- ${item}\n`);
            }
            
            els.generatedPrompt.value = prompt;
        };

        // Show notification
        const showNotification = (message, type = 'info') => {
            const notification = document.createElement('div');
            const colors = {
                success: 'bg-green-600',
                error: 'bg-red-600',
                info: 'bg-blue-600'
            };
            
            notification.className = `${colors[type]} text-white px-4 py-3 rounded-md shadow-lg notification text-sm`;
            notification.textContent = message;
            
            els.notifications.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        };

        // Copy to clipboard helper
        const copyToClipboard = async (text, successMsg) => {
            try {
                await navigator.clipboard.writeText(text);
                showNotification(successMsg, 'success');
            } catch {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showNotification(successMsg, 'success');
            }
        };

        // Export configuration
        const exportConfiguration = () => {
            const config = {
                purpose: els.purpose.value,
                checklist: checklistItems
            };
            els.exportJson.value = JSON.stringify(config, null, 2);
            els.exportModal.classList.remove('hidden');
        };

        // Download JSON file
        const downloadJsonFile = () => {
            const config = {
                purpose: els.purpose.value,
                checklist: checklistItems
            };
            const dataStr = JSON.stringify(config, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'xsukax-config.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            showNotification('Configuration downloaded!', 'success');
        };

        // Import configuration
        const importConfiguration = () => {
            try {
                const config = JSON.parse(els.importJson.value);
                applyConfig(config);
                els.importModal.classList.add('hidden');
                els.importJson.value = '';
                showNotification('Configuration imported successfully!', 'success');
            } catch {
                showNotification('Invalid JSON format', 'error');
            }
        };

        // Upload JSON file
        const uploadJsonFile = () => {
            els.jsonFileInput.click();
        };

        // Handle file upload
        els.jsonFileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    els.importJson.value = event.target.result;
                    e.target.value = ''; // Reset file input
                };
                reader.readAsText(file);
            }
        });

        // Generate shareable URL
        const generateShareableUrl = () => {
            const config = {
                purpose: els.purpose.value,
                checklist: checklistItems
            };
            
            const encryptionType = document.querySelector('input[name="encryptionType"]:checked').value;
            let url = window.location.href.split('?')[0];
            
            if (encryptionType === 'base64') {
                const encoded = btoa(JSON.stringify(config));
                url += `?config=${encodeURIComponent(encoded)}`;
            } else {
                const password = els.sharePassword.value;
                if (!password) {
                    showNotification('Please enter a password for encryption', 'error');
                    return;
                }
                const encrypted = CryptoJS.AES.encrypt(JSON.stringify(config), password).toString();
                const encoded = btoa(encrypted);
                url += `?encrypted=${encodeURIComponent(encoded)}`;
            }
            
            els.shareUrl.value = url;
            els.copyUrl.classList.remove('hidden');
            els.openUrl.classList.remove('hidden');
        };

        // Open URL in new tab
        const openGeneratedUrl = () => {
            const url = els.shareUrl.value;
            if (url) {
                window.open(url, '_blank');
            }
        };

        // Load from URL
        const loadFromUrl = () => {
            const params = new URLSearchParams(window.location.search);
            const configParam = params.get('config');
            const encryptedParam = params.get('encrypted');
            
            if (configParam) {
                try {
                    const decoded = atob(decodeURIComponent(configParam));
                    const config = JSON.parse(decoded);
                    applyConfig(config);
                    showNotification('Configuration loaded from URL!', 'success');
                } catch (error) {
                    showNotification('Error loading configuration from URL', 'error');
                }
            } else if (encryptedParam) {
                encryptedData = encryptedParam;
                els.passwordModal.classList.remove('hidden');
            }
        };

        // Decrypt configuration
        const decryptConfiguration = () => {
            const password = els.decryptPassword.value;
            if (!password) {
                showNotification('Please enter a password', 'error');
                return;
            }
            
            try {
                const decoded = atob(decodeURIComponent(encryptedData));
                const decrypted = CryptoJS.AES.decrypt(decoded, password).toString(CryptoJS.enc.Utf8);
                
                if (decrypted) {
                    const config = JSON.parse(decrypted);
                    applyConfig(config);
                    els.passwordModal.classList.add('hidden');
                    els.decryptPassword.value = '';
                    showNotification('Configuration loaded from encrypted URL!', 'success');
                } else {
                    showNotification('Invalid password or corrupted data', 'error');
                }
            } catch {
                showNotification('Error decrypting configuration', 'error');
            }
        };

        // Apply configuration
        const applyConfig = (config) => {
            if (config.purpose !== undefined) {
                els.purpose.value = config.purpose;
            }
            if (Array.isArray(config.checklist)) {
                config.checklist.forEach(imported => {
                    const existing = checklistItems.find(item => item.id === imported.id);
                    if (existing) existing.checked = imported.checked;
                });
                initializeChecklist();
                updateGeneratedPrompt();
            }
        };

        // Event listeners
        els.purpose.addEventListener('input', updateGeneratedPrompt);
        els.copyBtn.addEventListener('click', () => copyToClipboard(els.generatedPrompt.value, 'Prompt copied to clipboard!'));
        els.importBtn.addEventListener('click', () => els.importModal.classList.remove('hidden'));
        els.exportBtn.addEventListener('click', exportConfiguration);
        els.shareBtn.addEventListener('click', () => {
            els.shareModal.classList.remove('hidden');
            els.shareUrl.value = '';
            els.copyUrl.classList.add('hidden');
            els.openUrl.classList.add('hidden');
            els.sharePassword.value = '';
        });
        els.cancelImport.addEventListener('click', () => {
            els.importModal.classList.add('hidden');
            els.importJson.value = '';
        });
        els.uploadJsonFile.addEventListener('click', uploadJsonFile);
        els.confirmImport.addEventListener('click', importConfiguration);
        els.closeExport.addEventListener('click', () => els.exportModal.classList.add('hidden'));
        els.downloadJson.addEventListener('click', downloadJsonFile);
        els.copyJson.addEventListener('click', () => copyToClipboard(els.exportJson.value, 'JSON copied to clipboard!'));
        els.cancelShare.addEventListener('click', () => els.shareModal.classList.add('hidden'));
        els.generateUrl.addEventListener('click', generateShareableUrl);
        els.openUrl.addEventListener('click', openGeneratedUrl);
        els.copyUrl.addEventListener('click', () => copyToClipboard(els.shareUrl.value, 'URL copied to clipboard!'));
        els.cancelDecrypt.addEventListener('click', () => {
            els.passwordModal.classList.add('hidden');
            els.decryptPassword.value = '';
        });
        els.confirmDecrypt.addEventListener('click', decryptConfiguration);
        
        // Handle Enter key in password fields
        els.sharePassword.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') generateShareableUrl();
        });
        els.decryptPassword.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') decryptConfiguration();
        });
        
        // Toggle password section
        document.querySelectorAll('input[name="encryptionType"]').forEach(radio => {
            radio.addEventListener('change', () => {
                els.passwordSection.classList.toggle('hidden', radio.value !== 'aes');
            });
        });
        
        // Close modals on outside click
        [els.importModal, els.exportModal, els.shareModal, els.passwordModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.add('hidden');
            });
        });

        // Initialize
        initializeChecklist();
        updateGeneratedPrompt();
        loadFromUrl();
    </script>
</body>
</html>
